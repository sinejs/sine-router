!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sineRouter=t():e.sineRouter=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(t,n,o,r){a(this,e),this.route=t,this.matched=n,this.remaining=o,this.parameters=r}return c(e,[{key:"equals",value:function(e){return this.matched===e.matched}}]),e}();sine.decorator.service({namespace:"sine.router",selector:"$router"})(n=function(e){function t(e){var n;return a(this,t),(n=r(this,i(t).call(this))).base="/",n.mode="history",n.routes=[],n.activeRoutes=[],n.routeChange=new sine.Messenger,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,sine.Service),c(t,[{key:"config",value:function(e,t){return this.routes=e,this.mode=t&&t.mode&&"history"===t.mode&&history.pushState?"history":"hash",this.base=t&&t.base?"/"+this.clearSlashes(t.base)+"/":"/",this}},{key:"getFragment",value:function(){var e="";if("history"===this.mode)e=(e=this.clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),e="/"!==this.base?e.replace(this.base,""):e;else{var t=window.location.href.match(/#(.*)$/);e=t?t[1]:""}return this.clearSlashes(e)}},{key:"clearSlashes",value:function(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}},{key:"add",value:function(e){this.routes.push(e)}},{key:"remove",value:function(e){sine.remove(this.routes,e)}},{key:"flush",value:function(){return this.routes=[],this.mode=null,this.base="/",this}},{key:"check",value:function(e){var t=e||this.getFragment(),n=[];this.matchRoute(this.routes,t,n),this.activeRoutes=n,this.routeChange.fire()}},{key:"matchRoute",value:function(e,t,n){if(e){var o=this;e.some((function(e){var r=o.matchPath(e,t);if(r){if(o.activeRoutes.length>0){var i=o.activeRoutes.shift();r.equals(i)?n.push(i):n.push(r)}else n.push(r);return o.matchRoute(e.children,r.remaining,n),!0}}))}}},{key:"matchPath",value:function(e,t){for(var n=[],o={},r=e.path.split("/"),i=t.split("/"),u=0;u<r.length;u++){var a=r[u];if(u>=i.length)return null;var s=i[u];if(a===s)n.push(s);else{if(!a.startsWith(":"))return null;n.push(s),o[a.substring(1)]=s}}return new l(e,n.join("/"),i.splice(r.length).join("/"),o)}},{key:"listen",value:function(){var e=this,t=e.getFragment();return e.check(t),clearInterval(this.interval),this.interval=setInterval((function(){t!==e.getFragment()&&(t=e.getFragment(),e.check(t))}),50),this}},{key:"navigate",value:function(e){return e=e||"","history"===this.mode?history.pushState(null,null,this.base+this.clearSlashes(e)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e,this}},{key:"stop",value:function(){clearInterval(this.interval)}}]),t}())},function(e,t){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}sine.decorator.component({namespace:"sine.router",selector:"router-view",inject:{$animate:"$animate",$router:"$router"}})(n=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}(this,i(t).call(this));var n=u(e);return e.activeCmp=null,e.activeRoute=null,e.activeRouteLevel=null,e.parentRoute=null,e.routes=[],e.onRouteChange=function(){n.UpdateRoute()},e}var n,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,sine.Component),n=t,(s=[{key:"init",value:function(){this.parentRoute=this.$$parentComponent&&this.$$parentComponent.$route,this.activeRouteLevel=this.$$parentComponent&&this.$$parentComponent.$routeLevel,this.$router&&(this.parentRoute?this.routes=this.parentRoute.route.children:(this.activeRouteLevel=0,this.routes=this.$router.routes,this.$router.listen()),this.$router.routeChange.on(this.onRouteChange),this.UpdateRoute())}},{key:"UpdateRoute",value:function(){if(this.activeRouteLevel>=this.$router.activeRoutes.length)this.activeRoute=null;else{var e=this.$router.activeRoutes[this.activeRouteLevel];if(this.activeRoute!==e){var t=this.routes.some((function(t){return e.route===t}));this.activeRoute=t?e:null,this.renderView()}}}},{key:"clearView",value:function(){var e=this;null!=this.activeCmp&&this.$animate.leave(this.$$element,(function(){e.activeCmp.$destroy(),e.activeCmp=null}))}},{key:"renderView",value:function(){var e=this;this.clearView(),this.activeCmp=this.$createChildCmp(this.activeRoute.route.component),this.activeCmp.$route=this.activeRoute,this.activeCmp.$routeLevel=this.activeRouteLevel+1,this.$$element.htmlElement.style.display="none",this.activeCmp.$mount(this.$$element.htmlElement),this.$animate.enter(this.$$element,(function(){e.$$element.htmlElement.style.display="block"}))}},{key:"afterViewMount",value:function(){this.init()}},{key:"onDestroy",value:function(){0===this.activeRouteLevel?this.$router.stop():this.$router.routeChange.off(this.onRouteChange),this.clearView()}}])&&r(n.prototype,s),c&&r(n,c),t}())},function(e,t){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}sine.decorator.component({namespace:"sine.router",selector:"router-link",template:'<span class="link" style="cursor: pointer;" @click="navigate()" *n-embed></span>',inject:{$router:"$router"}})(n=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,u(t).call(this))).to="",e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,sine.Component),n=t,(o=[{key:"navigate",value:function(){this.$router.navigate(this.to)}}])&&r(n.prototype,o),s&&r(n,s),t}())},function(e,t,n){"use strict";n.r(t);var o=n(0);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var i=n(1);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var u=n(2);for(var r in u)"default"!==r&&function(e){n.d(t,e,(function(){return u[e]}))}(r)}])}));